version: '3'

services:
  midjourney_proxy_redis:
    container_name: midjourney_proxy_redis
    image: redis
    command: redis-server --requirepass ${REDIS_PASSWORD}
    ports:
      - "6389:6379"
    networks:
      - default
    volumes:
      - ./redis-data:/data

  midjourney_proxy:
    container_name: midjourney_proxy
    image: novicezk/midjourney-proxy:2.5.4
    depends_on:
      - midjourney_proxy_redis
    ports:
      - "8090:8080"
    volumes:
      - ./config:/home/spring/config
    networks:
      - default